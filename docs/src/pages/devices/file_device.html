
<div class="col-sm-12 col-md-12 col-lg-12">
    <div class="ContentBox">
        <h3>
            The "FileDevice" : persisting tensors
        </h3>
        <p>
            The abstraction provided by the "Device" interface
            does not necessitate that concrete implementations
            represent accelerator hardware. <br>
            Generally speaking a device is a thing that
            stores tensors and optionally also handles "ExecutionCall" instances.
            Therefore, an implementation might also represent a simple
            storage device like your local SSD ord HDD...
        </p>
    </div>
</div>
<div class="col-sm-12 col-md-12 col-lg-12">
    <div class="ContentBox">
        <p>
            Consequently there is a useful Device implementation which
            will fulfill this requirement. <br>
            The "FileDevice" class can be instantiated via a
            factory method by passing a String expression containing a path :
        </p>
    </div>
</div>
<div class="col-sm-12 col-md-6">
    <div class="TabWrapper">
        <div class="TabHead">
            <button onclick="switchTab(event, '.groovyTab')" class="selected">Groovy</button>
            <button onclick="switchTab(event, '.javaTab')">Java</button>
        </div>
        <div class="TabBody">
            <div class="groovyTab">
                <pre><code class="hljs java">

    def device = FileDevice.instance('my/relative/path/to/a/directory');

                </code></pre>
            </div>
            <div class="javaTab" style="display:none">
                <pre><code class="hljs java">

    Device device = FileDevice.instance("my/relative/path/to/a/directory");

                </code></pre>
            </div>
        </div>
    </div>
</div>
<div class="col-sm-12 col-md-12 col-lg-12">
    <div class="ContentBox">
        <p>

        </p>
    </div>
</div>
<div class="col-sm-12 col-md-6">
    <div class="TabWrapper">
        <div class="TabHead">
            <button onclick="switchTab(event, '.groovyTab')" class="selected">Groovy</button>
            <button onclick="switchTab(event, '.javaTab')">Java</button>
        </div>
        <div class="TabBody">
            <div class="groovyTab">
                <pre><code class="hljs java">

    // Creating a device which manages the directory targeted by a given path :
    def device = FileDevice.instance( 'my/relative/path/to/directory' )

    // ... and a tensor which we want to persist :
    Tsr a = new Tsr([2, 4, 3], 4)

    // Initially the device does not know about the tensor "a" :
    assert !device.contains(a)

    // But when we store it on the file device...
    device.store( a, 'tensor-name.idx' ) // 'device.store( a )' if the name should be generated...

    // ... then the tensor exists as a "idx" file :
    assert new File( 'my/relative/path/to/directory' + 'tensor-name.idx' ).exists()

    // ... and the RAM will be freed ...
    assert a.data == null

    // If we want to delete the tensor from the device then we call the following :
    device.free( a )

    // ... and the file is gone :
    assert !new File( path + '/' + 'tensor-name.idx' ).exists()

                </code></pre>
            </div>
            <div class="javaTab" style="display:none">
                <pre><code class="hljs java">

    // Creating a device which manages the directory targeted by a given path :
    Device device = FileDevice.instance( "my/relative/path/to/directory" );

    // ... and a tensor which we want to persist :
    Tsr a = new Tsr([2, 4, 3], 4);

    // Initially the device does not know about the tensor "a" :
    assert !device.contains(a);

    // But when we store it on the file device...
    device.store( a, "tensor-name.idx" ); // 'device.store( a )' if the name should be generated...

    // ... then the tensor exists as a "idx" file :
    assert new File( path + "/" + "tensor-name.idx" ).exists();

    // ... and the RAM will be freed ...
    assert a.data == null;

    // If we want to delete the tensor from the device then we call the following :
    device.free( a );

    // ... and the file is gone :
    assert !new File( "my/relative/path/to/directory" + "tensor-name.idx" ).exists();

                </code></pre>
            </div>
        </div>
    </div>
</div>
<div class="col-sm-12 col-md-12 col-lg-12">
    <div class="ContentBox">
        <p>

        </p>
    </div>
</div>
