<!DOCTYPE html><html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'></meta>
<link rel="stylesheet" href="../css/custom.css">
</head>
<body>
<h2>Report for ut.tensors.Tensor_Device_Mock_Unit_Tests</h2>
<hr></hr>
<div class='back-link'>
<a href='index.html'>&lt;&lt; Back</a>
</div>
<div class='summary-report'>
<h3>Summary:</h3>
<div class='date-test-ran'>Created on Mon Aug 24 16:51:35 CEST 2020 by Daniel</div>
<table class='summary-table'>
<thead>
<th>Executed features</th>
<th>Failures</th>
<th>Errors</th>
<th>Skipped</th>
<th>Success rate</th>
<th>Time</th>
</thead>
<tbody>
<tr>
<td>4</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>100,0%</td>
<td>0,020 seconds</td>
</tr>
</tbody>
</table>
</div>
<h3>Features:</h3>
<table class='features-table'>
<colgroup>
<col class='block-kind-col'></col>
<col class='block-text-col'></col>
</colgroup>
<tbody>
<ul id='toc'>
<li>
<a href='#-489590671' class='feature-toc-pass'>Tensors try to migrate themselves to a device that is being added to them as component.</a>
</li>
<li>
<a href='#1729198465' class='feature-toc-pass'>Tensors try to remove themselves from their device when "setIsOutsourced(false)" is being called.</a>
</li>
<li>
<a href='#346911233' class='feature-toc-pass'>The device of a tensor can be accessed via the "device()" method.</a>
</li>
<li>
<a href='#-678241499' class='feature-toc-pass'>When creating slices of tensors then this should trigger a "parent - child" relation noticable to the device!</a>
</li>
</ul>
<tr>
<td colspan='10'>
<div class='feature-description' id='-489590671'>
<span>Tensors try to migrate themselves to a device that is being added to them as component.</span>
<span style='float: right; font-size: 60%;'>
<a href='#toc'>Return</a>
</span>
</div>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Given:</div>
</td>
<td>
<div class='block-text'>A mock device and a simple tensor instance.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>def device = Mock(Device)
Tsr t = new Tsr(2)
device.has(t) &gt;&gt;&gt; [false, true, true]</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>When:</div>
</td>
<td>
<div class='block-text'>The mock device is being added to the tensor...</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>t.add(device)</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Then:</div>
</td>
<td>
<div class='block-text'>...the tensor should try to add itself to the given device.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>1 * device.add(t)</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>And:</div>
</td>
<td>
<div class='block-text'>It "views itself" as outsourced.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>t.isOutsourced()</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>And:</div>
</td>
<td>
<div class='block-text'>It stores the device as a component.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>t.has(Device.class)</pre>
</td>
</tr>
<tr>
<td colspan='10'>
<div class='feature-description' id='1729198465'>
<span>Tensors try to remove themselves from their device when "setIsOutsourced(false)" is being called.</span>
<span style='float: right; font-size: 60%;'>
<a href='#toc'>Return</a>
</span>
</div>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Given:</div>
</td>
<td>
<div class='block-text'>A simple tensor instance with a mock device as component.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>def device = Mock(Device)
device.has(_) &gt;&gt;&gt; [false, true, true]
Tsr t = new Tsr(2).add(device)</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>When:</div>
</td>
<td>
<div class='block-text'>The "isOutsourced" property is being set to false...</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>t.isOutsourced = false</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Then:</div>
</td>
<td>
<div class='block-text'>...the tensor should try to remove itself from the given device.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>1 * device.get(t)</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>And:</div>
</td>
<td>
<div class='block-text'>The device should not be a tensor component anymore.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>!t.has(Device.class)</pre>
</td>
</tr>
<tr>
<td colspan='10'>
<div class='feature-description' id='346911233'>
<span>The device of a tensor can be accessed via the "device()" method.</span>
<span style='float: right; font-size: 60%;'>
<a href='#toc'>Return</a>
</span>
</div>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Given:</div>
</td>
<td>
<div class='block-text'>A simple tensor having a device as component</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>def device = Mock(Device)
device.has(_) &gt;&gt;&gt; [false, true, true]
Tsr t = new Tsr(1).add(device)</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>When:</div>
</td>
<td>
<div class='block-text'>The device is being accessed via the "device()" method...</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>Device found = t.device()</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Then:</div>
</td>
<td>
<div class='block-text'>This found device should be the one that was set originally.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>found == device</pre>
</td>
</tr>
<tr>
<td colspan='10'>
<div class='feature-description' id='-678241499'>
<span>When creating slices of tensors then this should trigger a "parent - child" relation noticable to the device!</span>
<span style='float: right; font-size: 60%;'>
<a href='#toc'>Return</a>
</span>
</div>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Given:</div>
</td>
<td>
<div class='block-text'>A 2D tensor having a device as component</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>def device = Mock(Device)
Tsr t = new Tsr([3, 3],[1, 2, 3, 4, 5, 6, 7, 8, 9])
device.has(t) &gt;&gt;&gt; [false, true]</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>When:</div>
</td>
<td>
<div class='block-text'>A slice is being created from the given tensor...</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>Tsr s = t[1..2, 0..2]</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>And:</div>
</td>
<td>
<div class='block-text'>The "parent tensor" is being migrated to the device...</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>t.add(device)</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>Then:</div>
</td>
<td>
<div class='block-text'>...this tensor should try to add itself to the given device.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>1 * device.add(t)</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>And:</div>
</td>
<td>
<div class='block-text'>The child should become outsourced.</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>s.isOutsourced()</pre>
</td>
</tr>
<tr>
<td>
<div class='block-kind'>And:</div>
</td>
<td>
<div class='block-text'>Internally the Tsr "asked" if it belongs to the Device twice. (before and after migration attempt)</div>
</td>
</tr>
<tr>
<td></td>
<td>
<pre class='block-source'>2 * device.has(t)</pre>
</td>
</tr>
</tbody>
</table>
<hr></hr>
<div class='footer'>Generated by <a href='https://github.com/renatoathaydes/spock-reports'>Athaydes Spock Reports</a></div>
</body>
</html>